@page "/"

<h3>Room Bookings</h3>

<a class="btn btn-success mb-2" href="/create">+ New Booking</a>

<select @bind="SelectedRoomId" class="form-select w-25 mb-3">
    <option value="">-- Filter by Room --</option>
    @foreach (var room in BookingService.Rooms)
    {
        <option value="@room.Id">@room.Name</option>
    }
</select>

@if (FilteredBookings.Any())
{
    @foreach (var booking in FilteredBookings)
    {
        var room = BookingService.Rooms.FirstOrDefault(r => r.Id == booking.RoomId);
        <div class="card mb-2">
            <div class="card-body">
                <strong>@room?.Name</strong> booked by <em>@booking.UserName</em><br />
                From: @booking.StartTime.ToString("g")<br />
                To: @booking.EndTime.ToString("g")
                <button class="btn btn-sm btn-danger float-end" @onclick="() => DeleteBooking(booking.Id)">Delete</button>
            </div>
        </div>
    }
}
else
{
    <p>No bookings found.</p>
}
